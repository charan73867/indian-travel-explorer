<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>India Travel Explorer - Discover Incredible India</title>
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.css" />
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&family=Playfair+Display:wght@700;900&display=swap" rel="stylesheet">
    
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Main colors */
            --primary: #FF6B35;
            --secondary: #F7931E;
            --accent: #C1292E;
            --dark: #1A1A2E;
            --darker: #0F0F1E;
            --light: #F5F5F5;
            --white: #FFFFFF;
            
            /* Functional colors */
            --success: #00C896;
            --warning: #FFD93D;
            
            /* Gradients */
            --gradient-primary: linear-gradient(135deg, #FF6B35 0%, #F7931E 100%);
            --gradient-dark: linear-gradient(135deg, #1A1A2E 0%, #0F0F1E 100%);
            --gradient-accent: linear-gradient(135deg, #C1292E 0%, #FF6B35 100%);
            
            /* Shadows */
            --shadow-sm: 0 2px 4px rgba(0,0,0,0.1);
            --shadow-md: 0 4px 6px rgba(0,0,0,0.1);
            --shadow-lg: 0 10px 15px rgba(0,0,0,0.1);
            --shadow-xl: 0 20px 25px rgba(0,0,0,0.1);
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: var(--gradient-dark);
            min-height: 100vh;
            line-height: 1.6;
        }
        
        /* Tourist Places Styles */
        .tourist-places-list {
            list-style: none;
            margin: 0;
            padding: 0;
        }
        .video-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            overflow: hidden;
        }
          
        .back-vid {
            position: absolute;
            top: 50%;
            left: 50%;
            min-width: 100%;
            min-height: 100%;
            width: auto;
            height: auto;
            transform: translateX(-50%) translateY(-50%);
            object-fit: cover;
        }
        .tourist-place-item {
            background: var(--white);
            margin-bottom: 12px;
            border-radius: 12px;
            padding: 16px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: var(--shadow-sm);
            border-left: 4px solid var(--primary);
        }

        .tourist-place-item:hover {
            transform: translateX(8px);
            box-shadow: var(--shadow-md);
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.8) 100%);
        }

        .tourist-place-item:active {
            transform: translateX(4px);
        }

        .place-name {
            font-weight: 600;
            color: var(--dark);
        }

        .view-details {
            color: var(--primary);
            font-size: 14px;
            font-weight: 500;
            opacity: 0.8;
            transition: all 0.3s ease;
        }

        .tourist-place-item:hover .view-details {
            opacity: 1;
            transform: translateX(5px);
        }

        /* Tourist Place Details */
        .tourist-place-details {
            animation: fadeInUp 0.5s ease-out;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .back-button {
            display: inline-flex;
            align-items: center;
            padding: 10px 20px;
            background: var(--light);
            border-radius: 50px;
            margin-bottom: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            color: var(--dark);
        }

        .back-button:hover {
            background: var(--dark);
            color: var(--white);
            transform: translateX(-5px);
        }

        .back-icon {
            margin-right: 8px;
            font-size: 18px;
        }

        .place-header {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .place-rating {
            display: flex;
            align-items: center;
            margin-top: 10px;
            font-size: 20px;
        }

        .star {
            color: var(--secondary);
            margin: 0 2px;
        }

        .full-star, .half-star {
            position: relative;
        }

        .half-star::after {
            content: '☆';
            position: absolute;
            left: 0;
            top: 0;
            width: 50%;
            overflow: hidden;
            color: var(--secondary);
        }

        .empty-star {
            opacity: 0.5;
        }

        .rating-value {
            margin-left: 8px;
            font-weight: 600;
            color: var(--dark);
        }

        /* Image Gallery */
        .place-image {
            width: 100%;
            height: 350px;
            object-fit: cover;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-lg);
            transition: transform 0.3s ease;
        }

        .place-image:hover {
            transform: scale(1.02);
        }

        .image-gallery {
            margin-bottom: 30px;
        }

        .gallery-main {
            margin-bottom: 15px;
        }

        .main-image {
            width: 100%;
            height: 350px;
            object-fit: cover;
            border-radius: 15px;
            box-shadow: var(--shadow-lg);
        }

        .gallery-thumbnails {
            display: flex;
            gap: 10px;
            overflow-x: auto;
            padding-bottom: 10px;
        }

        .gallery-thumbnails::-webkit-scrollbar {
            height: 5px;
        }

        .gallery-thumbnails::-webkit-scrollbar-track {
            background: var(--light);
            border-radius: 10px;
        }

        .gallery-thumbnails::-webkit-scrollbar-thumb {
            background: var(--gradient-primary);
            border-radius: 10px;
        }

        .thumbnail {
            width: 80px;
            height: 60px;
            object-fit: cover;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            opacity: 0.7;
            border: 2px solid transparent;
        }

        .thumbnail:hover {
            opacity: 1;
            transform: translateY(-3px);
        }

        .thumbnail.active {
            opacity: 1;
            border-color: var(--primary);
            box-shadow: 0 0 10px rgba(255, 107, 53, 0.5);
        }

        /* Navigation Button Styles */
        .navigation-button {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 15px 25px;
            background: var(--gradient-primary);
            color: var(--white);
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            font-size: 16px;
            text-decoration: none;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-md);
            margin: 15px 0;
        }

        .navigation-button:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-xl);
            background: var(--gradient-accent);
        }

        .navigation-button:active {
            transform: translateY(-1px);
        }

        .navigation-icon {
            font-size: 20px;
        }

        /* Info Cards Grid */
        .place-info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .info-card {
            background: var(--white);
            border-radius: 15px;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            box-shadow: var(--shadow-sm);
            transition: all 0.3s ease;
        }

        .info-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-md);
        }

        .info-icon {
            font-size: 28px;
            background: var(--gradient-primary);
            color: var(--white);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow-sm);
        }

        .info-content {
            flex: 1;
        }

        .info-content h4 {
            font-size: 16px;
            margin-bottom: 5px;
            color: var(--dark);
        }

        .info-content p {
            font-size: 14px;
            color: var(--dark);
            opacity: 0.8;
        }

        /* Custom Marker for Tourist Places */
        .tourist-place-icon {
            background: transparent;
            width: 40px !important;
            height: 40px !important;
        }

        .marker-icon {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: bounce 1.5s infinite;
        }

        .marker-icon span {
            font-size: 40px;
            color: var(--accent);
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        @keyframes bounce {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-10px);
            }
        }

        /* Accommodation Styles */
        .accommodation-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }

        .accommodation-card {
            background: var(--white);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: var(--shadow-md);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .accommodation-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .accommodation-image {
            height: 180px;
            overflow: hidden;
        }

        .accommodation-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.4s ease;
        }

        .accommodation-card:hover .accommodation-image img {
            transform: scale(1.05);
        }

        .accommodation-details {
            padding: 15px;
        }

        .accommodation-details h4 {
            font-size: 18px;
            margin-bottom: 8px;
            color: var(--dark);
        }

        .accommodation-rating {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .accommodation-desc, .accommodation-cuisine {
            font-size: 14px;
            color: var(--dark);
            margin-bottom: 8px;
            line-height: 1.4;
        }

        .accommodation-price {
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 10px;
        }

        .view-on-map {
            color: var(--accent);
            font-size: 14px;
            font-weight: 500;
            display: inline-block;
            transition: all 0.2s ease;
        }

        .accommodation-card:hover .view-on-map {
            transform: translateX(5px);
        }

        /* Original CSS for the India Travel Explorer */
        .animated-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }

        .animated-bg::before {
            content: '';
            position: absolute;
            width: 200%;
            height: 200%;
            top: -50%;
            left: -50%;
            background: url('data:image/svg+xml,<svg width="100" height="100" xmlns="http://www.w3.org/2000/svg"><defs><pattern id="grid" width="50" height="50" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="rgba(255,107,53,0.1)"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
            animation: float 20s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            50% { transform: translate(-20px, -20px) rotate(180deg); }
        }

        /* Header Section */
        .header {
            background: transparent;
            padding: 60px 0;
            position: relative;
            text-align: center;
            color: var(--white);
        }

        .header-content h1 {
            font-family: 'Playfair Display', serif;
            font-size: clamp(3rem, 8vw, 5rem);
            font-weight: 900;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 20px;
            animation: slideInDown 1s ease-out;
        }

        .header-subtitle {
            font-size: 1.25rem;
            color: var(--light);
            font-weight: 300;
            opacity: 0.9;
            animation: slideInUp 1s ease-out 0.3s both;
        }

        @keyframes slideInDown {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Container */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Controls Section */
        .controls-wrapper {
            background: var(--white);
            border-radius: 20px;
            padding: 30px;
            margin: -30px auto 40px;
            max-width: 800px;
            box-shadow: var(--shadow-xl);
            position: relative;
            z-index: 10;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 16px 40px;
            border: none;
            border-radius: 50px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
            background: var(--gradient-primary);
            color: var(--white);
            box-shadow: var(--shadow-md);
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-xl);
        }

        .btn:active {
            transform: translateY(-1px);
        }

        .btn-active {
            background: var(--gradient-accent);
            box-shadow: 0 0 20px rgba(193, 41, 46, 0.5);
        }

        /* Main Content */
        .main-content {
            display: grid;
            grid-template-columns: 1.2fr 0.8fr;
            gap: 30px;
            margin-bottom: 60px;
        }

        /* Card Base Style */
        .card {
            background: var(--white);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
            transition: all 0.3s ease;
        }

        .card:hover {
            box-shadow: var(--shadow-xl);
            transform: translateY(-5px);
        }

        /* Map Container */
        .map-card {
            position: relative;
        }

        .card-header {
            background: var(--gradient-dark);
            color: var(--white);
            padding: 20px 25px;
            font-weight: 600;
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .card-header .icon {
            font-size: 24px;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        #map {
            height: 600px;
            background: var(--light);
        }

        /* Content Panel */
        .content-panel {
            display: flex;
            flex-direction: column;
            max-height: 700px;
        }

        .content-body {
            flex: 1;
            overflow-y: auto;
            padding: 25px;
            background: var(--white);
        }

        .content-body::-webkit-scrollbar {
            width: 8px;
        }

        .content-body::-webkit-scrollbar-track {
            background: var(--light);
            border-radius: 10px;
        }

        .content-body::-webkit-scrollbar-thumb {
            background: var(--gradient-primary);
            border-radius: 10px;
        }

        /* States Grid */
        .states-section h3 {
            font-size: 20px;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .states-section h3::after {
            content: '';
            flex: 1;
            height: 3px;
            background: var(--gradient-primary);
            border-radius: 3px;
        }

        .states-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 15px;
        }

        .state-card {
            background: var(--gradient-primary);
            color: var(--white);
            padding: 18px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-align: center;
            font-weight: 600;
            font-size: 14px;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-md);
        }

        .state-card::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: var(--gradient-accent);
            border-radius: 15px;
            opacity: 0;
            z-index: -1;
            transition: opacity 0.3s ease;
        }

        .state-card:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 10px 30px rgba(255, 107, 53, 0.3);
        }

        .state-card:hover::before {
            opacity: 1;
        }

        .state-card.active {
            background: var(--gradient-accent);
            transform: scale(1.05);
            box-shadow: 0 0 30px rgba(193, 41, 46, 0.5);
        }

        /* State Details */
        .state-details {
            animation: fadeInRight 0.5s ease-out;
        }

        @keyframes fadeInRight {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .detail-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 3px solid var(--primary);
            position: relative;
        }

        .detail-header h2 {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            color: var(--dark);
            margin-bottom: 10px;
        }

        .detail-header .capital {
            font-size: 18px;
            color: var(--primary);
            font-weight: 500;
        }

        .state-image {
            width: 100%;
            height: 300px;
            object-fit: cover;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-lg);
            transition: transform 0.3s ease;
        }

        .state-image:hover {
            transform: scale(1.02);
        }

        .info-section {
            background: var(--light);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            border-left: 5px solid var(--primary);
            transition: all 0.3s ease;
        }

        .info-section:hover {
            box-shadow: var(--shadow-md);
            transform: translateX(5px);
        }

        .info-section h3 {
            font-size: 18px;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .info-section h3 .emoji {
            font-size: 24px;
        }

        .info-list {
            list-style: none;
        }

        .info-list li {
            padding: 12px 0;
            border-bottom: 1px solid rgba(0,0,0,0.1);
            color: var(--dark);
            position: relative;
            padding-left: 30px;
            transition: all 0.2s ease;
        }

        .info-list li:hover {
            color: var(--primary);
            padding-left: 35px;
        }

        .info-list li:before {
            content: "→";
            color: var(--primary);
            position: absolute;
            left: 0;
            font-weight: 700;
            font-size: 18px;
        }

        /* Loading State */
        .loading {
            text-align: center;
            padding: 80px 20px;
        }

        .loading-icon {
            width: 60px;
            height: 60px;
            border: 4px solid var(--light);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 30px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading p {
            font-size: 18px;
            color: var(--dark);
            font-weight: 500;
        }

        /* Error State */
        .error {
            background: linear-gradient(135deg, #FF6B6B 0%, #EE5A52 100%);
            color: var(--white);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            font-weight: 500;
            box-shadow: var(--shadow-lg);
        }

        /* Leaflet Popup Customization */
        .leaflet-popup-content-wrapper {
            background: var(--gradient-dark);
            border-radius: 15px;
            box-shadow: var(--shadow-xl);
            border: 2px solid var(--primary);
        }

        .leaflet-popup-tip {
            background: var(--dark);
            border: 2px solid var(--primary);
        }

        .leaflet-popup-content {
            margin: 20px;
            line-height: 1.8;
        }

        .popup-title {
            font-weight: 700;
            font-size: 20px;
            color: var(--primary);
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .popup-info {
            font-size: 15px;
            color: var(--white);
        }

        .popup-info strong {
            color: var(--secondary);
        }

        /* Custom Marker */
        .custom-div-icon {
            background: var(--gradient-primary);
            border: 3px solid var(--white);
            border-radius: 50%;
            width: 30px;
            height: 30px;
            box-shadow: 0 3px 10px rgba(255, 107, 53, 0.5);
            position: relative;
        }

        .custom-div-icon::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 8px solid transparent;
            border-right: 8px solid transparent;
            border-top: 10px solid var(--primary);
        }

        /* Footer */
        .footer {
            background: var(--gradient-dark);
            color: var(--white);
            text-align: center;
            padding: 40px 0;
            margin-top: 80px;
        }

        .footer p {
            font-size: 16px;
            opacity: 0.9;
        }

        /* Map Controls */
        .map-control-buttons {
            position: absolute;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .map-control-button {
            background: var(--white);
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            cursor: pointer;
            box-shadow: var(--shadow-md);
            transition: all 0.3s ease;
            color: var(--dark);
        }
        
        .map-control-button:hover {
            transform: scale(1.1);
            box-shadow: var(--shadow-lg);
            background: var(--gradient-primary);
            color: var(--white);
        }
        
        /* Map layers control */
        .map-layers-control {
            position: absolute;
            top: 70px;
            right: 10px;
            z-index: 1000;
            background: var(--white);
            border-radius: 8px;
            box-shadow: var(--shadow-md);
            padding: 10px;
        }
        
        .layer-toggle {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            cursor: pointer;
        }
        
        .layer-toggle:last-child {
            margin-bottom: 0;
        }
        
        .layer-toggle input {
            margin-right: 8px;
        }
        
        /* Marker clusters */
        .marker-cluster {
            background: var(--gradient-primary);
            color: var(--white);
            border-radius: 50%;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow-md);
        }
        
        /* Custom hotel and restaurant markers */
        .hotel-marker-icon {
            background: transparent;
            width: 40px !important;
            height: 40px !important;
        }
        
        .hotel-marker {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: pulse 2s infinite;
        }
        
        .hotel-marker span {
            font-size: 30px;
            color: #3F51B5;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .restaurant-marker-icon {
            background: transparent;
            width: 40px !important;
            height: 40px !important;
        }
        
        .restaurant-marker {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: pulse 2s infinite;
        }
        
        .restaurant-marker span {
            font-size: 30px;
            color: #E91E63;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        /* Filter buttons for accommodation/restaurants */
        .filter-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .filter-button {
            padding: 8px 15px;
            border: none;
            border-radius: 25px;
            background: var(--light);
            color: var(--dark);
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-sm);
        }
        
        .filter-button:hover {
            background: var(--gradient-primary);
            color: var(--white);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        .filter-button.active {
            background: var(--gradient-primary);
            color: var(--white);
            box-shadow: var(--shadow-md);
        }
        
        /* AI Assistant Button */
        .ai-assistant-wrapper {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 9999;
        }
        
        .ai-assistant-button {
            width: 70px;
            height: 70px;
            border-radius: 35px;
            background: linear-gradient(135deg, #FF6B35 0%, #C1292E 100%);
            border: none;
            box-shadow: 0 5px 25px rgba(255, 107, 53, 0.5);
            cursor: pointer;
            position: relative;
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.27, 1.55);
            overflow: visible;
        }
        
        .ai-assistant-button:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 30px rgba(255, 107, 53, 0.7);
            border-radius: 25px;
        }
        
        /* Avatar Face Animation */
        .ai-avatar {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        
        .ai-face {
            width: 45px;
            height: 45px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 22px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.1);
        }
        
        .ai-eyes {
            display: flex;
            justify-content: space-between;
            width: 30px;
            margin-bottom: 8px;
        }
        
        .ai-eye {
            width: 8px;
            height: 8px;
            background: #333;
            border-radius: 50%;
            position: relative;
            animation: blink 4s infinite;
        }
        
        @keyframes blink {
            0%, 45%, 50%, 100% {
                transform: scaleY(1);
            }
            48% {
                transform: scaleY(0.1);
            }
        }
        
        .ai-mouth {
            width: 20px;
            height: 3px;
            background: #333;
            border-radius: 10px;
            position: relative;
            animation: talk 2s infinite;
        }
        
        @keyframes talk {
            0%, 20%, 40%, 60%, 80%, 100% {
                height: 3px;
                border-radius: 10px;
            }
            10%, 30%, 50%, 70%, 90% {
                height: 10px;
                border-radius: 10px;
            }
        }
        
        /* Tooltip that appears on hover */
        .ai-tooltip {
            position: absolute;
            top: -50px;
            right: 0;
            background: #1A1A2E;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            white-space: nowrap;
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.3s ease;
            pointer-events: none;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .ai-tooltip::after {
            content: '';
            position: absolute;
            bottom: -8px;
            right: 25px;
            width: 0;
            height: 0;
            border-left: 8px solid transparent;
            border-right: 8px solid transparent;
            border-top: 8px solid #1A1A2E;
        }
        
        .ai-assistant-button:hover .ai-tooltip {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* Pulse effect */
        .ai-assistant-button::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 35px;
            background: rgba(255, 107, 53, 0.5);
            z-index: -1;
            animation: pulse 2s infinite;
        }
        
        /* Floating animation */
        .ai-assistant-wrapper {
            animation: float 4s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-15px);
            }
        }
        
        /* Quick accessibility hint that appears on page load */
        .ai-assistant-wrapper::after {
            content: 'Ask me anything about India!';
            position: absolute;
            top: -80px;
            right: 0;
            background: white;
            color: #1A1A2E;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            white-space: nowrap;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            animation: fadeInOut 5s forwards;
            pointer-events: none;
        }
        
        .ai-assistant-wrapper::before {
            content: '';
            position: absolute;
            top: -14px;
            right: 35px;
            width: 0;
            height: 0;
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-top: 15px solid white;
            animation: fadeInOut 5s forwards;
            pointer-events: none;
        }
        
        @keyframes fadeInOut {
            0%, 10% {
                opacity: 0;
                transform: translateY(10px);
            }
            20%, 80% {
                opacity: 1;
                transform: translateY(0);
            }
            100% {
                opacity: 0;
                transform: translateY(-10px);
            }
        }
        
        /* Responsive adjustments */
        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            #map {
                height: 450px;
            }
            
            .accommodation-container {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
        }
 
        @media (max-width: 768px) {
            .header-content h1 {
                font-size: 3rem;
            }
            
            .controls {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
            
            .states-grid {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            }
            
            .detail-header h2 {
                font-size: 2rem;
            }
            
            .accommodation-container {
                grid-template-columns: 1fr;
            }
            
            .place-info-grid {
                grid-template-columns: 1fr;
            }
            
            .main-image,
            .place-image {
                height: 250px;
            }
            
            .info-card {
                padding: 15px;
            }
            
            .ai-assistant-button {
                width: 60px;
                height: 60px;
            }
            
            .ai-face {
                width: 35px;
                height: 35px;
            }
            
            .ai-eyes {
                width: 24px;
            }
            
            .ai-eye {
                width: 6px;
                height: 6px;
            }
            
            .ai-mouth {
                width: 16px;
            }
            
            .ai-assistant-wrapper::after,
            .ai-assistant-wrapper::before {
                display: none;
            }
        }
 
        /* Special Effects */
        .glow {
            animation: glow 2s ease-in-out infinite alternate;
        }
 
        @keyframes glow {
            from {
                box-shadow: 0 0 10px var(--primary);
            }
            to {
                box-shadow: 0 0 20px var(--primary), 0 0 30px var(--primary);
            }
        }
        
        /* NEW FEATURES - Search & Filter System */
        .search-container {
            background: var(--white);
            border-radius: 20px;
            padding: 20px;
            margin: 20px auto;
            max-width: 800px;
            display: flex;
            gap: 15px;
            align-items: center;
            box-shadow: var(--shadow-lg);
            position: relative;
            z-index: 20;
        }
 
        .search-input-group {
            flex: 1;
            position: relative;
            display: flex;
        }
 
        .search-input {
            flex: 1;
            padding: 15px 20px;
            border: 2px solid #ecf0f1;
            border-radius: 25px;
            font-size: 16px;
            color: var(--dark);
            transition: all 0.3s ease;
            font-family: 'Poppins', sans-serif;
            width: 100%;
        }
 
        .search-input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.1);
            outline: none;
        }
 
        .search-button {
            position: absolute;
            right: 5px;
            top: 50%;
            transform: translateY(-50%);
            background: var(--gradient-primary);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }
 
        .search-button:hover {
            transform: translateY(-50%) scale(1.05);
            box-shadow: 0 5px 15px rgba(255, 107, 53, 0.3);
        }
 
        .filter-dropdown {
            position: relative;
        }
 
        .filter-toggle {
            background: var(--gradient-dark);
            color: var(--white);
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
 
        .filter-toggle:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
 
        .filter-panel {
            position: absolute;
            top: calc(100% + 10px);
            right: 0;
            background: var(--white);
            border-radius: 15px;
            padding: 20px;
            width: 300px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            z-index: 100;
            display: none;
            animation: fadeInDown 0.3s ease-out;
        }
 
        .filter-panel.active {
            display: block;
        }
 
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
 
        .filter-group {
            margin-bottom: 20px;
        }
 
        .filter-group h4 {
            font-size: 16px;
            color: var(--dark);
            margin-bottom: 10px;
            padding-bottom: 5px;
            border-bottom: 1px solid #ecf0f1;
        }
 
        .filter-options {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
 
        .filter-options label {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            color: var(--dark);
            cursor: pointer;
            transition: all 0.2s ease;
        }
 
        .filter-options label:hover {
            color: var(--primary);
        }
 
        .filter-options input {
            width: 16px;
            height: 16px;
            accent-color: var(--primary);
        }
 
        .filter-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
 
        .filter-apply-btn {
            flex: 1;
            padding: 10px;
            background: var(--gradient-primary);
            color: white;
            border: none;
            border-radius: 20px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
 
        .filter-clear-btn {
            flex: 1;
            padding: 10px;
            background: #ecf0f1;
            color: var(--dark);
            border: none;
            border-radius: 20px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
 
        .filter-apply-btn:hover, .filter-clear-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
 
        .search-results {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            margin-top: 15px;
            padding: 20px;
            box-shadow: var(--shadow-lg);
            max-height: 400px;
            overflow-y: auto;
            display: none;
        }
 
        .search-results.active {
            display: block;
            animation: fadeInUp 0.3s ease-out;
        }
 
        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #ecf0f1;
        }
 
        .results-count {
            color: var(--dark);
            font-weight: 600;
        }
 
        .results-close {
            background: none;
            border: none;
            color: var(--dark);
            cursor: pointer;
            font-size: 18px;
            transition: all 0.2s ease;
        }
 
        .results-close:hover {
            color: var(--primary);
            transform: scale(1.1);
        }
 
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }
 
        /* Active filters display */
        .active-filters {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }
 
        .filter-tag {
            background: var(--light);
            color: var(--dark);
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
 
        .filter-tag button {
            background: none;
            border: none;
            cursor: pointer;
            color: var(--dark);
            font-size: 14px;
            line-height: 1;
        }
        
        /* NEW FEATURES - Favorites & Collections */
        .favorites-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255, 255, 255, 0.9);
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #ccc;
        }
 
        .favorites-btn:hover {
            transform: scale(1.1);
            background: white;
            color: #e74c3c;
        }
 
        .favorites-btn.active {
            color: #e74c3c;
        }
 
        .state-actions {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 8px;
        }
 
        .action-btn {
            background: rgba(255, 255, 255, 0.9);
            border: none;
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--dark);
        }
 
        .action-btn:hover {
            transform: translateY(-2px);
            background: var(--white);
            box-shadow: var(--shadow-md);
        }
 
        .action-btn.favorite-active {
            color: #e74c3c;
        }
 
        .recently-viewed-container {
            background: var(--white);
            border-radius: 20px;
            padding: 20px;
            margin: -15px auto 30px;
            box-shadow: var(--shadow-lg);
        }
 
        .recently-viewed-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
 
        .recently-viewed-grid {
            display: flex;
            gap: 15px;
            overflow-x: auto;
            padding-bottom: 10px;
        }
 
        .recently-viewed-item {
            min-width: 180px;
            height: 120px;
            background: linear-gradient(135deg, rgba(255, 107, 53, 0.9), rgba(247, 147, 30, 0.9)), url('path/to/default-image.jpg');
            background-size: cover;
            background-position: center;
            border-radius: 15px;
            padding: 15px;
            color: white;
            font-weight: 600;
            position: relative;
            overflow: hidden;
            cursor: pointer;
            box-shadow: var(--shadow-md);
            transition: all 0.3s ease;
            display: flex;
            align-items: flex-end;
        }
 
        .recently-viewed-item:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }
 
        .recently-viewed-grid::-webkit-scrollbar {
            height: 5px;
        }
 
        .recently-viewed-grid::-webkit-scrollbar-track {
            background: var(--light);
            border-radius: 10px;
        }
 
        .recently-viewed-grid::-webkit-scrollbar-thumb {
            background: var(--gradient-primary);
            border-radius: 10px;
        }
 
        .my-favorites-tab {
            background: var(--white);
            border-radius: 20px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: var(--shadow-lg);
        }
 
        .favorites-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--primary);
        }
 
        .favorites-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }
 
        .favorites-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
        }
 
        .favorite-card {
            background: var(--gradient-primary);
            color: var(--white);
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
 
        .favorite-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }
 
        .favorite-card h3 {
            font-size: 18px;
            margin-bottom: 8px;
        }
 
        .favorite-card p {
            font-size: 14px;
            opacity: 0.9;
        }
 
        .remove-favorite {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255, 255, 255, 0.3);
            border: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            color: white;
        }
 
        .remove-favorite:hover {
            background: rgba(255, 255, 255, 0.5);
            transform: scale(1.1);
        }
 
        .empty-favorites {
            text-align: center;
            padding: 40px 20px;
            color: #95a5a6;
        }
 
        .empty-favorites i {
            font-size: 50px;
            margin-bottom: 15px;
            opacity: 0.5;
        }
    </style>
 </head>
 <body>
    <div class="video-background">
        <video class="back-vid" autoplay loop muted plays-inline src="videos/galaxy.mp4"></video>
    </div>
    
    <!-- Animated Background -->
    <div class="animated-bg"></div>
 
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <h1>India Travel Explorer</h1>
                <p class="header-subtitle">Embark on a Journey Through Incredible India</p>
            </div>
        </div>
    </header>
 
    <!-- Search Bar -->
    <div class="container">
        <div class="search-container">
            <div class="search-input-group">
                <input type="text" id="searchInput" placeholder="Search states, attractions, or cities..." class="search-input">
                <button id="searchButton" class="search-button">
                    <i class="fas fa-search"></i>
                </button>
            </div>
            <div class="filter-dropdown">
                <button class="filter-toggle" id="filterToggle">
                    <i class="fas fa-filter"></i> Filters
                </button>
                <div class="filter-panel" id="filterPanel">
                    <div class="filter-group">
                        <h4>Categories</h4>
                        <div class="filter-options">
                            <label><input type="checkbox" data-filter="category" value="historical"> Historical Sites</label>
                            <label><input type="checkbox" data-filter="category" value="beaches"> Beaches</label>
                            <label><input type="checkbox" data-filter="category" value="mountains"> Mountains</label>
                            <label><input type="checkbox" data-filter="category" value="wildlife"> Wildlife</label>
                            <label><input type="checkbox" data-filter="category" value="pilgrimage"> Pilgrimage</label>
                        </div>
                    </div>
                    <div class="filter-group">
                        <h4>Region</h4>
                        <div class="filter-options">
                            <label><input type="checkbox" data-filter="region" value="north"> North India</label>
                            <label><input type="checkbox" data-filter="region" value="south"> South India</label>
                            <label><input type="checkbox" data-filter="region" value="east"> East India</label>
                            <label><input type="checkbox" data-filter="region" value="west"> West India</label>
                            <label><input type="checkbox" data-filter="region" value="central"> Central India</label>
                            <label><input type="checkbox" data-filter="region" value="northeast"> Northeast India</label>
                        </div>
                    </div>
                    <div class="filter-group">
                        <h4>Sort By</h4>
                        <div class="filter-options">
                            <label><input type="radio" name="sortBy" value="alphabetical" checked> Alphabetical</label>
                            <label><input type="radio" name="sortBy" value="popularity"> Popularity</label>
                            <label><input type="radio" name="sortBy" value="rating"> Rating</label>
                        </div>
                    </div>
                    <div class="filter-actions">
                        <button id="applyFilters" class="filter-apply-btn">Apply Filters</button>
                        <button id="clearFilters" class="filter-clear-btn">Clear All</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
 
    <!-- Recently Viewed Section -->
    <div class="container" id="recentlyViewedContainer" style="display: none;">
        <div class="recently-viewed-container">
            <div class="recently-viewed-title">
                <i class="fas fa-history"></i> Recently Viewed
            </div>
            <div class="recently-viewed-grid" id="recentlyViewedGrid">
                <!-- Recently viewed items will be added here dynamically -->
            </div>
        </div>
    </div>
 
    <!-- Controls -->
    <div class="container">
        <div class="controls-wrapper">
            <div class="controls">
                <button class="btn" onclick="loadStates('north')" id="btnNorth">
                    🏔️ North India
                </button>
                <button class="btn" onclick="loadStates('south')" id="btnSouth">
                    🌴 South India
                </button>
                <button class="btn" onclick="loadAllStates()" id="btnAll">
                    🗺️ All States
                </button>
                <button class="btn" onclick="showFavorites()" id="btnFavorites">
                    ❤️ My Favorites
                </button>
            </div>
        </div>
    </div>
 
    <!-- Main Content -->
    <main class="container">
        <div class="main-content">
            <!-- Map Section -->
            <div class="card map-card">
                <div class="card-header">
                    <span class="icon">📍</span>
                    Interactive Map
                </div>
                <div id="map"></div>
                
                <!-- Map Controls -->
                <div class="map-control-buttons">
                    <button class="map-control-button" onclick="toggleAccommodationsLayer()" id="hotelToggle" title="Toggle Hotels">
                        🏨
                    </button>
                    <button class="map-control-button" onclick="toggleRestaurantsLayer()" id="restaurantToggle" title="Toggle Restaurants">
                        🍽️
                    </button>
                    <button class="map-control-button" onclick="resetMapView()" title="Reset Map View">
                        🔄
                    </button>
                </div>
                
                <!-- Map Layers Control -->
                <div class="map-layers-control">
                    <div class="layer-toggle">
                        <input type="checkbox" id="statesLayer" checked>
                        <label for="statesLayer">States</label>
                    </div>
                    <div class="layer-toggle">
                        <input type="checkbox" id="placesLayer" checked>
                        <label for="placesLayer">Tourist Places</label>
                    </div>
                </div>
            </div>
            
            <!-- Content Panel -->
            <div class="card content-panel">
                <div class="card-header">
                    <span class="icon">🎯</span>
                    Explore States
                </div>
                <div class="content-body">
                    <div id="statesList">
                        <div class="loading">
                            <div class="loading-icon"></div>
                            <p>Choose a region to begin exploring!</p>
                        </div>
                    </div>
                    <div id="stateDetails"></div>
                    <div id="favoritesContainer" style="display: none;">
                        <div class="my-favorites-tab">
                            <div class="favorites-header">
                                <div class="favorites-title">
                                    <i class="fas fa-heart"></i> My Favorite Destinations
                                </div>
                                <button class="action-btn" onclick="hideShowFavorites(false)">
                                    <i class="fas fa-times"></i> Close
                                </button>
                            </div>
                            <div id="favoritesGrid" class="favorites-grid">
                                <!-- Favorites will be added here dynamically -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- AI Assistant Button -->
        <div class="ai-assistant-wrapper">
            <button class="ai-assistant-button" onclick="openAssistant()">
                <!-- Avatar face animation -->
                <div class="ai-avatar">
                    <div class="ai-face">
                        <!-- Eyes -->
                        <div class="ai-eyes">
                            <div class="ai-eye"></div>
                            <div class="ai-eye"></div>
                        </div>
                        <!-- Mouth -->
                        <div class="ai-mouth"></div>
                    </div>
                </div>
                <!-- Text that appears on hover -->
                <div class="ai-tooltip">
                    <span>India Travel Assistant</span>
                </div>
            </button>
        </div>
    </main>
 
    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>© 2024 India Travel Explorer | Discover the Magic of India</p>
        </div>
    </footer>
 
    <!-- Leaflet JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.js"></script>
    
    <script>
        // Initialize map
        let map;
        let markersLayer;
        let hotelsLayer;
        let restaurantsLayer;
        let currentStates = [];
        let selectedState = null;
        let currentPlace = null;
        
        // Favorites and recently viewed storage
        let userFavorites = [];
        let recentlyViewed = [];
 
        // State coordinates
        const stateCoordinates = {
            // North India
            'Delhi': [28.6139, 77.2090],
            'Punjab': [31.1471, 75.3412],
            'Haryana': [29.0588, 76.0856],
            'Rajasthan': [27.0238, 74.2179],
            'Uttar Pradesh': [26.8467, 80.9462],
            'Himachal Pradesh': [31.1048, 77.1734],
            'Uttarakhand': [30.0668, 79.0193],
            'Jammu and Kashmir': [34.0837, 74.7973],
            'Ladakh': [34.1526, 77.5770],
            'Chandigarh': [30.7333, 76.7794],
            
            // South India
            'Karnataka': [15.3173, 75.7139],
            'Tamil Nadu': [11.1271, 78.6569],
            'Kerala': [10.8505, 76.2711],
            'Andhra Pradesh': [15.9129, 79.7400],
            'Telangana': [18.1124, 79.0193],
            'Puducherry': [11.9416, 79.8083],
            
            // Other states
            'Maharashtra': [19.7515, 75.7139],
            'Gujarat': [23.0225, 72.5714],
            'Madhya Pradesh': [22.9734, 78.6569],
            'Chhattisgarh': [21.2787, 81.8661],
            'Odisha': [20.9517, 85.0985],
            'West Bengal': [22.9868, 87.8550],
            'Bihar': [25.0961, 85.3131],
            'Jharkhand': [23.6102, 85.2799],
            'Assam': [26.2006, 92.9376],
            'Meghalaya': [25.4670, 91.3662],
            'Manipur': [24.6637, 93.9063],
            'Mizoram': [23.1645, 92.9376],
            'Tripura': [23.9408, 91.9882],
            'Nagaland': [26.1584, 94.5624],
            'Arunachal Pradesh': [28.2180, 94.7278],
            'Sikkim': [27.5330, 88.5122],
            'Goa': [15.2993, 74.1240]
        };
 
        // Custom marker icons
        const customStateIcon = L.divIcon({
            className: 'custom-div-icon',
            iconSize: [30, 30],
            iconAnchor: [15, 30],
            popupAnchor: [0, -30]
        });
        
        const touristPlaceIcon = L.divIcon({
            className: 'tourist-place-icon',
            iconSize: [40, 40],
            iconAnchor: [20, 40],
            popupAnchor: [0, -40],
            html: `<div class="marker-icon"><span>📍</span></div>`
        });
        
        const hotelIcon = L.divIcon({
            className: 'hotel-marker-icon',
            iconSize: [40, 40],
            iconAnchor: [20, 40],
            popupAnchor: [0, -40],
            html: `<div class="hotel-marker"><span>🏨</span></div>`
        });
        
        const restaurantIcon = L.divIcon({
            className: 'restaurant-marker-icon',
            iconSize: [40, 40],
            iconAnchor: [20, 40],
            popupAnchor: [0, -40],
            html: `<div class="restaurant-marker"><span>🍽️</span></div>`
        });
 
        // Initialize map and load saved data
        // Initialize map and load saved data
document.addEventListener('DOMContentLoaded', function() {
    // Initialize global arrays
    window.savedUserFavorites = window.savedUserFavorites || [];
    window.savedRecentlyViewed = window.savedRecentlyViewed || [];
    
    initMap();
    loadUserData(); // Load user data from memory
    setupSearchAndFilters();
    
    // Add some interactive effects
    document.querySelectorAll('.btn').forEach(btn => {
        btn.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-3px) scale(1.05)';
        });
        
        btn.addEventListener('mouseleave', function() {
            if (!this.classList.contains('btn-active')) {
                this.style.transform = 'translateY(0) scale(1)';
            }
        });
    });
    
    // Load north India states by default
    loadStates('north');
});
 
        // Load user data from localStorage
        // Load user data from localStorage
function loadUserData() {
    if (window.savedUserFavorites) {
        userFavorites = window.savedUserFavorites;
    } else {
        // Store in memory variables instead of localStorage for Claude.ai compatibility
        userFavorites = [];
        window.savedUserFavorites = userFavorites;
    }
    
    if (window.savedRecentlyViewed) {
        recentlyViewed = window.savedRecentlyViewed;
        updateRecentlyViewedDisplay();
    } else {
        recentlyViewed = [];
        window.savedRecentlyViewed = recentlyViewed;
    }
}
 
        // Save user data
        // Save user data
function saveUserData() {
    // Store in memory variables instead of localStorage for Claude.ai compatibility
    window.savedUserFavorites = [...userFavorites]; // Use spread operator to create a copy
    window.savedRecentlyViewed = [...recentlyViewed]; // Use spread operator to create a copy
    
    // For debugging
    console.log("Saved favorites:", window.savedUserFavorites);
    console.log("Saved recently viewed:", window.savedRecentlyViewed);
}
 
        // Setup search and filters
        function setupSearchAndFilters() {
            const searchInput = document.getElementById('searchInput');
            const searchButton = document.getElementById('searchButton');
            const filterToggle = document.getElementById('filterToggle');
            const filterPanel = document.getElementById('filterPanel');
            const applyFiltersBtn = document.getElementById('applyFilters');
            const clearFiltersBtn = document.getElementById('clearFilters');
            
            // Toggle filter panel
            filterToggle.addEventListener('click', function() {
                filterPanel.classList.toggle('active');
            });
            
            // Close filter panel when clicking outside
            document.addEventListener('click', function(e) {
                if (!filterToggle.contains(e.target) && !filterPanel.contains(e.target)) {
                    filterPanel.classList.remove('active');
                }
            });
            
            // Search functionality
            searchButton.addEventListener('click', performSearch);
            searchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    performSearch();
                }
            });
            
            // Apply filters
            applyFiltersBtn.addEventListener('click', function() {
                applyFilters();
                filterPanel.classList.remove('active');
            });
            
            // Clear filters
            clearFiltersBtn.addEventListener('click', clearFilters);
        }
 
        function initMap() {
            map = L.map('map', {
                center: [20.5937, 78.9629],
                zoom: 5,
                zoomControl: true
            });
            
            // Colorful map tiles
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '© OpenStreetMap contributors',
                opacity: 0.9
            }).addTo(map);
 
            // Initialize layers
            markersLayer = L.layerGroup().addTo(map);
            hotelsLayer = L.layerGroup().addTo(map);
            restaurantsLayer = L.layerGroup().addTo(map);
            
            // Layer control event listeners
            document.getElementById('statesLayer').addEventListener('change', function() {
                if (this.checked) {
                    map.addLayer(markersLayer);
                } else {
                    map.removeLayer(markersLayer);
                }
            });
            
            document.getElementById('placesLayer').addEventListener('change', function() {
                if (this.checked) {
                    map.addLayer(hotelsLayer);
                    map.addLayer(restaurantsLayer);
                } else {
                    map.removeLayer(hotelsLayer);
                    map.removeLayer(restaurantsLayer);
                }
            });
        }
        
        // Toggle hotels layer
        function toggleAccommodationsLayer() {
            const button = document.getElementById('hotelToggle');
            
            if (map.hasLayer(hotelsLayer)) {
                map.removeLayer(hotelsLayer);
                button.style.background = 'var(--white)';
                button.style.color = 'var(--dark)';
            } else {
                map.addLayer(hotelsLayer);
                button.style.background = 'var(--gradient-primary)';
                button.style.color = 'var(--white)';
            }
        }
        
        // Toggle restaurants layer
        function toggleRestaurantsLayer() {
            const button = document.getElementById('restaurantToggle');
            
            if (map.hasLayer(restaurantsLayer)) {
                map.removeLayer(restaurantsLayer);
                button.style.background = 'var(--white)';
                button.style.color = 'var(--dark)';
            } else {
                map.addLayer(restaurantsLayer);
                button.style.background = 'var(--gradient-primary)';
                button.style.color = 'var(--white)';
            }
        }
        
        // Reset map view
        function resetMapView() {
            map.flyTo([20.5937, 78.9629], 5, { duration: 1.5 });
        }
 
        function setActiveButton(buttonId) {
            document.querySelectorAll('.btn').forEach(btn => {
                btn.classList.remove('btn-active', 'glow');
            });
            if (buttonId) {
                const activeBtn = document.getElementById(buttonId);
                activeBtn.classList.add('btn-active', 'glow');
            }
        }
 
        function addMarkersToMap(states) {
            markersLayer.clearLayers();
            
            states.forEach(state => {
                const coords = stateCoordinates[state.name];
                if (coords) {
                    const marker = L.marker(coords, { icon: customStateIcon })
                        .bindPopup(`
                            <div class="popup-title">${state.name}</div>
                            <div class="popup-info">
                                <strong>Capital:</strong> ${state.capital}<br>
                                <strong>Region:</strong> ${state.region}<br>
                                <em style="display: block; margin-top: 10px; opacity: 0.8;">Click to explore more!</em>
                            </div>
                        `)
                        .on('click', () => {
                            showStateDetails(state);
                            highlightStateCard(state.name);
                        });
                    
                    markersLayer.addLayer(marker);
                }
            });
        }
 
        function highlightStateCard(stateName) {
            document.querySelectorAll('.state-card').forEach(card => {
                card.classList.remove('active');
            });
            
            const activeCard = Array.from(document.querySelectorAll('.state-card'))
                .find(card => card.textContent.trim() === stateName);
            
            if (activeCard) {
                activeCard.classList.add('active');
                activeCard.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }
        }
 
        async function loadStates(region) {
            try {
                setActiveButton(`btn${region.charAt(0).toUpperCase() + region.slice(1)}`);
                
                // Hide favorites if showing
                hideShowFavorites(false);
                
                document.getElementById('statesList').innerHTML = `
                    <div class="loading">
                        <div class="loading-icon"></div>
                        <p>Discovering ${region} India...</p>
                    </div>
                `;
                document.getElementById('stateDetails').innerHTML = '';
                
                // Clear all layers
                markersLayer.clearLayers();
                hotelsLayer.clearLayers();
                restaurantsLayer.clearLayers();
                
                const response = await fetch(`/states/${region}`);
                if (!response.ok) throw new Error('Failed to fetch states');
                
                const states = await response.json();
                currentStates = states;
                displayStates(states, region);
                addMarkersToMap(states);
                
                // Adjust map view
                if (region === 'north') {
                    map.flyTo([28.6, 77.2], 6, { duration: 1.5 });
                } else if (region === 'south') {
                    map.flyTo([13.0, 77.5], 6, { duration: 1.5 });
                }
                
            } catch (error) {
                document.getElementById('statesList').innerHTML = 
                    `<div class="error">
                        <strong>Oops!</strong> Unable to load states. Please try again.
                    </div>`;
            }
        }
 
        async function loadAllStates() {
            try {
                setActiveButton('btnAll');
                
                // Hide favorites if showing
                hideShowFavorites(false);
                
                document.getElementById('statesList').innerHTML = `
                    <div class="loading">
                        <div class="loading-icon"></div>
                        <p>Loading all Indian states...</p>
                    </div>
                `;
                document.getElementById('stateDetails').innerHTML = '';
                
                // Clear all layers
                markersLayer.clearLayers();
                hotelsLayer.clearLayers();
                restaurantsLayer.clearLayers();
                
                const response = await fetch('/api/all-states');
                if (!response.ok) throw new Error('Failed to fetch states');
                
                const states = await response.json();
                currentStates = states;
                displayStates(states, 'all');
                addMarkersToMap(states);
                map.flyTo([20.5937, 78.9629], 5, { duration: 1.5 });
                
            } catch (error) {
                document.getElementById('statesList').innerHTML = 
                    `<div class="error">
                        <strong>Oops!</strong> Unable to load states. Please try again.
                    </div>`;
            }
        }
 
        function displayStates(states, region) {
            const listDiv = document.getElementById('statesList');
            
            if (states.length === 0) {
                listDiv.innerHTML = '<div class="loading">No states found</div>';
                return;
            }
 
            const regionText = region === 'all' ? 'All' : region.charAt(0).toUpperCase() + region.slice(1);
 
            listDiv.innerHTML = `
                <div class="states-section">
                    <h3>
                        ${regionText} Indian States
                        <span style="background: var(--gradient-primary); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-weight: 800;">(${states.length})</span>
                    </h3>
                    <div class="states-grid">
                        ${states.map(state => `
                            <div class="state-card" onclick="showStateDetails(${JSON.stringify(state).replace(/"/g, '&quot;')})">
                                <button class="favorites-btn ${isFavorite(state.name) ? 'active' : ''}" onclick="toggleFavorite(event, '${state.name}')">
                                    <i class="fas fa-heart"></i>
                                </button>
                                ${state.name}
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }
 
        function showStateDetails(state) {
            selectedState = state;
            
            // Focus on state location
            const coords = stateCoordinates[state.name];
            if (coords) {
                map.flyTo(coords, 8, { duration: 1.5 });
            }
            
            // Add to recently viewed
            addToRecentlyViewed(state);
            
            const detailsDiv = document.getElementById('stateDetails');
            detailsDiv.innerHTML = `
                <div class="state-details">
                    <div class="detail-header">
                        <div class="state-actions">
                            <button class="action-btn ${isFavorite(state.name) ? 'favorite-active' : ''}" onclick="toggleFavorite(event, '${state.name}')">
                                <i class="fas fa-heart"></i> ${isFavorite(state.name) ? 'Saved' : 'Save'}
                            </button>
                        </div>
                        <h2>${state.name}</h2>
                        <p class="capital">Capital: ${state.capital}</p>
                    </div>
                    
                    ${state.image ? `<img src="${state.image}" alt="${state.name}" class="state-image" onerror="this.style.display='none'" />` : ''}
                    
                    ${state.description ? `
                    <div class="info-section">
                        <h3><span class="emoji">📝</span> Overview</h3>
                        <p>${state.description}</p>
                    </div>
                    ` : ''}
 
                    ${state.bestTimeToVisit ? `
                    <div class="info-section">
                        <h3><span class="emoji">🌤️</span> Best Time to Visit</h3>
                        <p>${state.bestTimeToVisit}</p>
                    </div>
                    ` : ''}
 
                    ${state.touristPlaces && state.touristPlaces.length > 0 ? `
                    <div class="info-section">
                        <h3><span class="emoji">🏛️</span> Must-Visit Places</h3>
                        <ul class="tourist-places-list">
                            ${state.touristPlaces.map(place => `
                                <li class="tourist-place-item" onclick="loadTouristPlaceDetails('${place}', '${state.name}')">
                                    <span class="place-name">${place}</span>
                                    <span class="view-details">View Details →</span>
                                </li>
                            `).join('')}
                        </ul>
                    </div>
                    ` : ''}
 
                    ${state.cuisine && state.cuisine.length > 0 ? `
                    <div class="info-section">
                        <h3><span class="emoji">🍽️</span> Local Delicacies</h3>
                        <ul class="info-list">
                            ${state.cuisine.map(item => `<li>${item}</li>`).join('')}
                        </ul>
                    </div>
                    ` : ''}
 
                    ${state.culture ? `
                    <div class="info-section">
                        <h3><span class="emoji">🎭</span> Culture & Heritage</h3>
                        <p>${state.culture}</p>
                    </div>
                    ` : ''}
 
                    ${state.transportation ? `
                    <div class="info-section">
                        <h3><span class="emoji">🚗</span> Getting Around</h3>
                        <p>${state.transportation}</p>
                    </div>
                    ` : ''}
 
                    ${state.highlights && state.highlights.length > 0 ? `
                    <div class="info-section">
                        <h3><span class="emoji">⭐</span> Highlights</h3>
                        <ul class="info-list">
                            ${state.highlights.map(item => `<li>${item}</li>`).join('')}
                        </ul>
                    </div>
                    ` : ''}
 
                    ${state.hotels && state.hotels.length > 0 ? `
                    <div class="info-section">
                        <h3><span class="emoji">🏨</span> Where to Stay</h3>
                        <ul class="info-list">
                            ${state.hotels.map(hotel => `<li>${hotel}</li>`).join('')}
                        </ul>
                    </div>
                    ` : ''}
                </div>
            `;
            
            // Smooth scroll to details
            detailsDiv.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
 
        // Function to display tourist place details
        async function loadTouristPlaceDetails(placeName, stateName) {
            try {
                document.getElementById('stateDetails').innerHTML = `
                    <div class="loading">
                        <div class="loading-icon"></div>
                        <p>Loading details for ${placeName}...</p>
                    </div>
                `;
                
                // Clear previous accommodation markers
                hotelsLayer.clearLayers();
                restaurantsLayer.clearLayers();
                
                // Fetch tourist place details from the backend
                const response = await fetch(`/api/tourist-place?name=${encodeURIComponent(placeName)}&state=${encodeURIComponent(stateName)}`);
                
                if (!response.ok) throw new Error('Failed to fetch tourist place details');
                
                const placeDetails = await response.json();
                currentPlace = placeDetails;
                displayTouristPlaceDetails(placeDetails);
                
                // Focus map on tourist place location
                if (placeDetails.location) {
                    // Add the main place marker
                    const placeMarker = L.marker([placeDetails.location.lat, placeDetails.location.lng], {
                        icon: touristPlaceIcon
                    }).addTo(markersLayer);
                    
                    placeMarker.bindPopup(`
                        <div class="popup-title">${placeDetails.name}</div>
                        <div class="popup-info">
                            <strong>Location:</strong> ${stateName}<br>
                            ${placeDetails.entryFee ? `<strong>Entry Fee:</strong> ${placeDetails.entryFee}<br>` : ''}
                            ${placeDetails.timings ? `<strong>Timings:</strong> ${placeDetails.timings}` : ''}
                        </div>
                    `);
                    
                    // Add hotel markers
                    if (placeDetails.hotels && placeDetails.hotels.length > 0) {
                        placeDetails.hotels.forEach(hotel => {
                            if (hotel.location) {
                                const hotelMarker = L.marker([hotel.location.lat, hotel.location.lng], {
                                    icon: hotelIcon
                                }).addTo(hotelsLayer);
                                
                                hotelMarker.bindPopup(`
                                    <div class="popup-title">${hotel.name}</div>
                                    <div class="popup-info">
                                        <strong>Price Range:</strong> ${hotel.priceRange}<br>
                                        <strong>Rating:</strong> ${hotel.rating.toFixed(1)} / 5<br>
                                        <p>${hotel.description}</p>
                                        <a href="https://www.google.com/maps/dir/?api=1&destination=${hotel.location.lat},${hotel.location.lng}&travelmode=driving" 
                                           target="_blank" 
                                           style="color: var(--primary); text-decoration: none; font-weight: 600; display: inline-block; margin-top: 10px;">
                                            🧭 Get Directions
                                        </a>
                                    </div>
                                `);
                            }
                        });
                    }
                    
                    // Add restaurant markers
                    if (placeDetails.restaurants && placeDetails.restaurants.length > 0) {
                        placeDetails.restaurants.forEach(restaurant => {
                            if (restaurant.location) {
                                const restaurantMarker = L.marker([restaurant.location.lat, restaurant.location.lng], {
                                    icon: restaurantIcon
                                }).addTo(restaurantsLayer);
                                
                                restaurantMarker.bindPopup(`
                                    <div class="popup-title">${restaurant.name}</div>
                                    <div class="popup-info">
                                        <strong>Cuisine:</strong> ${restaurant.cuisine}<br>
                                        <strong>Price Range:</strong> ${restaurant.priceRange}<br>
                                        <strong>Rating:</strong> ${restaurant.rating.toFixed(1)} / 5<br>
                                        <a href="https://www.google.com/maps/dir/?api=1&destination=${restaurant.location.lat},${restaurant.location.lng}&travelmode=driving" 
                                           target="_blank" 
                                           style="color: var(--primary); text-decoration: none; font-weight: 600; display: inline-block; margin-top: 10px;">
                                            🧭 Get Directions
                                        </a>
                                    </div>
                                `);
                            }
                        });
                    }
                    
                    // Fly to the place location
                    map.flyTo([placeDetails.location.lat, placeDetails.location.lng], 12, { 
                        duration: 1.5,
                        easeLinearity: 0.5
                    });
                    
                    // Open the place popup
                    placeMarker.openPopup();
                }
                
            } catch (error) {
                document.getElementById('stateDetails').innerHTML = `
                    <div class="error">
                        <strong>Oops!</strong> Unable to load details for ${placeName}. Please try again.
                    </div>
                `;
            }
        }
 
        // Function to display tourist place details with hotels, restaurants, and navigation
        function displayTouristPlaceDetails(place) {
            const detailsDiv = document.getElementById('stateDetails');
            
            // Create an image gallery if multiple images are available
            let imagesHTML = '';
            if (place.images && place.images.length > 0) {
                if (place.images.length === 1) {
                    imagesHTML = `<img src="${place.images[0]}" alt="${place.name}" class="place-image" />`;
                } else {
                    imagesHTML = `
                        <div class="image-gallery">
                            <div class="gallery-main">
                                <img src="${place.images[0]}" alt="${place.name}" class="main-image" id="mainPlaceImage" />
                            </div>
                            <div class="gallery-thumbnails">
                                ${place.images.map((img, index) => `
                                    <img src="${img}" alt="${place.name} image ${index+1}" 
                                         class="thumbnail ${index === 0 ? 'active' : ''}" 
                                         onclick="updateMainImage('${img}', this)" />
                                `).join('')}
                            </div>
                        </div>
                    `;
                }
            }
            
            detailsDiv.innerHTML = `
                <div class="tourist-place-details">
                    <div class="back-button" onclick="showStateDetails(selectedState)">
                        <span class="back-icon">←</span> Back to ${place.state}
                    </div>
                    
                    <div class="detail-header place-header">
                        <h2>${place.name}</h2>
                        ${place.rating ? `
                            <div class="place-rating">
                                ${generateStars(place.rating)}
                                <span class="rating-value">${place.rating.toFixed(1)}</span>
                            </div>
                        ` : ''}
                    </div>
                    
                    ${imagesHTML}
                    
                    <div class="info-section">
                        <h3><span class="emoji">📝</span> About</h3>
                        <p>${place.description}</p>
                    </div>
                    
                    <!-- Filter buttons for map display -->
                    <div class="filter-buttons">
                        <button class="filter-button active" onclick="toggleMapDisplay('all')">Show All</button>
                        <button class="filter-button" onclick="toggleMapDisplay('hotels')">Hotels Only</button>
                        <button class="filter-button" onclick="toggleMapDisplay('restaurants')">Restaurants Only</button>
                        <button class="filter-button" onclick="centerMapOnPlace()">Center on ${place.name}</button>
                    </div>
                    
                    <!-- Navigation Section -->
                    ${place.location ? `
                    <div class="info-section">
                        <h3><span class="emoji">🗺️</span> Navigation</h3>
                        <p>Get directions and navigate to ${place.name} using Google Maps.</p>
                        <a href="https://www.google.com/maps/dir/?api=1&destination=${place.location.lat},${place.location.lng}&travelmode=driving" 
                           target="_blank" 
                           class="navigation-button">
                            <span class="navigation-icon">🧭</span>
                            Get Directions
                        </a>
                    </div>
                    ` : ''}
                    
                    ${place.highlights && place.highlights.length > 0 ? `
                    <div class="info-section">
                        <h3><span class="emoji">⭐</span> Highlights</h3>
                        <ul class="info-list">
                            ${place.highlights.map(item => `<li>${item}</li>`).join('')}
                        </ul>
                    </div>
                    ` : ''}
                    
                    <div class="place-info-grid">
                        ${place.bestTimeToVisit ? `
                        <div class="info-icon">🌤️</div>
                           <div class="info-content">
                               <h4>Best Time to Visit</h4>
                               <p>${place.bestTimeToVisit}</p>
                           </div>
                       </div>
                       ` : ''}
                       
                       ${place.entryFee ? `
                       <div class="info-card">
                           <div class="info-icon">💰</div>
                           <div class="info-content">
                               <h4>Entry Fee</h4>
                               <p>${place.entryFee}</p>
                           </div>
                       </div>
                       ` : ''}
                       
                       ${place.timings ? `
                       <div class="info-card">
                           <div class="info-icon">⏰</div>
                           <div class="info-content">
                               <h4>Timings</h4>
                               <p>${place.timings}</p>
                           </div>
                       </div>
                       ` : ''}
                   </div>
                   
                   ${place.howToReach ? `
                   <div class="info-section">
                       <h3><span class="emoji">🚗</span> How to Reach</h3>
                       <p>${place.howToReach}</p>
                   </div>
                   ` : ''}
                   
                   ${place.nearbyAttractions && place.nearbyAttractions.length > 0 ? `
                   <div class="info-section">
                       <h3><span class="emoji">🏞️</span> Nearby Attractions</h3>
                       <ul class="info-list">
                           ${place.nearbyAttractions.map(attraction => `<li>${attraction}</li>`).join('')}
                       </ul>
                   </div>
                   ` : ''}
                   
                   <!-- Hotels Section -->
                   ${place.hotels && place.hotels.length > 0 ? `
                   <div class="info-section">
                       <h3><span class="emoji">🏨</span> Where to Stay</h3>
                       <div class="accommodation-container">
                           ${place.hotels.map(hotel => `
                               <div class="accommodation-card" onclick="showOnMap(${hotel.location.lat}, ${hotel.location.lng}, '${hotel.name}', 'hotel')">
                                   <div class="accommodation-image">
                                       <img src="${hotel.image}" alt="${hotel.name}" onerror="this.src='https://images.unsplash.com/photo-1566073771259-6a8506099945?w=500'" />
                                   </div>
                                   <div class="accommodation-details">
                                       <h4>${hotel.name}</h4>
                                       <div class="accommodation-rating">
                                           ${generateStars(hotel.rating)}
                                           <span class="rating-value">${hotel.rating.toFixed(1)}</span>
                                       </div>
                                       <p class="accommodation-desc">${hotel.description}</p>
                                       <p class="accommodation-price">${hotel.priceRange}</p>
                                       <span class="view-on-map">Show on Map →</span>
                                   </div>
                               </div>
                           `).join('')}
                       </div>
                   </div>
                   ` : ''}
                   
                   <!-- Restaurants Section -->
                   ${place.restaurants && place.restaurants.length > 0 ? `
                   <div class="info-section">
                       <h3><span class="emoji">🍽️</span> Where to Eat</h3>
                       <div class="accommodation-container">
                           ${place.restaurants.map(restaurant => `
                               <div class="accommodation-card" onclick="showOnMap(${restaurant.location.lat}, ${restaurant.location.lng}, '${restaurant.name}', 'restaurant')">
                                   <div class="accommodation-image">
                                       <img src="${restaurant.image}" alt="${restaurant.name}" onerror="this.src='https://images.unsplash.com/photo-1514326640560-7d063ef2aed5?w=500'" />
                                   </div>
                                   <div class="accommodation-details">
                                       <h4>${restaurant.name}</h4>
                                       <div class="accommodation-rating">
                                           ${generateStars(restaurant.rating)}
                                           <span class="rating-value">${restaurant.rating.toFixed(1)}</span>
                                       </div>
                                       <p class="accommodation-cuisine">${restaurant.cuisine}</p>
                                       <p class="accommodation-price">${restaurant.priceRange}</p>
                                       <span class="view-on-map">Show on Map →</span>
                                   </div>
                               </div>
                           `).join('')}
                       </div>
                   </div>
                   ` : ''}
               </div>
           `;
           
           // Smooth scroll to details
           detailsDiv.scrollIntoView({ behavior: 'smooth', block: 'start' });
       }

       // Helper function to generate star ratings
       function generateStars(rating) {
           const fullStars = Math.floor(rating);
           const hasHalfStar = rating % 1 >= 0.5;
           const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);
           
           let starsHTML = '';
           
           // Full stars
           for (let i = 0; i < fullStars; i++) {
               starsHTML += '<span class="star full-star">★</span>';
           }
           
           // Half star
           if (hasHalfStar) {
               starsHTML += '<span class="star half-star">★</span>';
           }
           
           // Empty stars
           for (let i = 0; i < emptyStars; i++) {
               starsHTML += '<span class="star empty-star">☆</span>';
           }
           
           return starsHTML;
       }

       // Function to update main image in gallery
       function updateMainImage(imgSrc, thumbElement) {
           document.getElementById('mainPlaceImage').src = imgSrc;
           
           // Update active thumbnail
           document.querySelectorAll('.thumbnail').forEach(thumb => {
               thumb.classList.remove('active');
           });
           thumbElement.classList.add('active');
       }

       // Function to toggle map display between all, hotels only, or restaurants only
       function toggleMapDisplay(type) {
           // Update active button
           document.querySelectorAll('.filter-button').forEach(btn => {
               btn.classList.remove('active');
           });
           event.target.classList.add('active');
           
           // Toggle layers based on selection
           if (type === 'all') {
               map.addLayer(markersLayer);
               map.addLayer(hotelsLayer);
               map.addLayer(restaurantsLayer);
           } else if (type === 'hotels') {
               map.removeLayer(restaurantsLayer);
               map.addLayer(markersLayer);
               map.addLayer(hotelsLayer);
           } else if (type === 'restaurants') {
               map.removeLayer(hotelsLayer);
               map.addLayer(markersLayer);
               map.addLayer(restaurantsLayer);
           }
       }
       
       // Function to center map on current place
       function centerMapOnPlace() {
           if (currentPlace && currentPlace.location) {
               map.flyTo([currentPlace.location.lat, currentPlace.location.lng], 12, { 
                   duration: 1.5,
                   easeLinearity: 0.5
               });
           }
       }
       
       // Function to show hotel or restaurant on map and zoom to it
       function showOnMap(lat, lng, name, type) {
           if (!lat || !lng) return;
           
           // Fly to the location
           map.flyTo([lat, lng], 16, { 
               duration: 1.5,
               easeLinearity: 0.5
           });
           
           // Find the corresponding marker and open its popup
           let targetLayer = type === 'hotel' ? hotelsLayer : restaurantsLayer;
           
           targetLayer.eachLayer(function(layer) {
               const markerLatLng = layer.getLatLng();
               
               // Use approximate comparison due to potential floating point differences
               if (Math.abs(markerLatLng.lat - lat) < 0.0001 && Math.abs(markerLatLng.lng - lng) < 0.0001) {
                   layer.openPopup();
               }
           });
           
           // Highlight on map visually (add a temporary highlight effect)
           const highlightIcon = L.divIcon({
               className: type === 'hotel' ? 'hotel-marker-icon' : 'restaurant-marker-icon',
               iconSize: [60, 60],
               iconAnchor: [30, 60],
               html: `<div class="${type === 'hotel' ? 'hotel-marker' : 'restaurant-marker'}" style="transform: scale(1.5); animation: pulse 1s infinite;">
                       <span>${type === 'hotel' ? '🏨' : '🍽️'}</span>
                     </div>`
           });
           
           const highlightMarker = L.marker([lat, lng], { icon: highlightIcon }).addTo(map);
           
           // Remove highlight after a few seconds
           setTimeout(() => {
               map.removeLayer(highlightMarker);
           }, 3000);
       }
       
       // Function for correct Google Maps navigation
       function openGoogleMapsNavigation(lat, lng, name) {
           if (!lat || !lng) return;
           
           // Use proper Google Maps URL format with coordinates and travel mode
           const url = `https://www.google.com/maps/dir/?api=1&destination=${lat},${lng}&travelmode=driving`;
           window.open(url, '_blank');
       }

       // Keyboard navigation
       document.addEventListener('keydown', function(e) {
           if (e.key === 'Escape' && selectedState) {
               document.getElementById('stateDetails').innerHTML = '';
               document.querySelectorAll('.state-card').forEach(card => {
                   card.classList.remove('active');
               });
               selectedState = null;
               
               // Clear accommodation markers
               hotelsLayer.clearLayers();
               restaurantsLayer.clearLayers();
           }
       });

       // Add parallax effect to header on scroll
       window.addEventListener('scroll', function() {
           const scrolled = window.pageYOffset;
           const header = document.querySelector('.header');
           header.style.transform = `translateY(${scrolled * 0.5}px)`;
       });
       
       // Function to open the AI Travel Assistant
       function openAssistant() {
           // Get current context to pass to the assistant
           let contextParams = '';
           if (selectedState) {
               contextParams = `?state=${encodeURIComponent(selectedState.name)}`;
               if (currentPlace) {
                   contextParams += `&place=${encodeURIComponent(currentPlace.name)}`;
               }
           } else if (document.getElementById('btnNorth').classList.contains('btn-active')) {
               contextParams = `?region=North India`;
           } else if (document.getElementById('btnSouth').classList.contains('btn-active')) {
               contextParams = `?region=South India`;
           }
           
           // Open assistant in a new tab with context
           window.open('/assistant' + contextParams, '_blank');
       }
       
       // Wait for DOM to be fully loaded - AI animation
       document.addEventListener('DOMContentLoaded', function() {
           const aiButton = document.querySelector('.ai-assistant-button');
           const aiEyes = document.querySelectorAll('.ai-eye');
           const aiMouth = document.querySelector('.ai-mouth');
           
           // Make eyes follow cursor
           document.addEventListener('mousemove', function(e) {
               const x = e.clientX / window.innerWidth;
               const y = e.clientY / window.innerHeight;
               
               aiEyes.forEach(eye => {
                   eye.style.transform = `translate(${(x - 0.5) * 5}px, ${(y - 0.5) * 5}px)`;
               });
           });
           
           // Make mouth react on hover
           aiButton.addEventListener('mouseenter', function() {
               aiMouth.style.animation = 'none';
               aiMouth.style.height = '10px';
               aiMouth.style.borderRadius = '5px 5px 10px 10px';
           });
           
           aiButton.addEventListener('mouseleave', function() {
               aiMouth.style.animation = 'talk 2s infinite';
           });
           
           // Make face change on click
           aiButton.addEventListener('mousedown', function() {
               aiEyes.forEach(eye => {
                   eye.style.height = '2px';
                   eye.style.borderRadius = '1px';
               });
           });
           
           document.addEventListener('mouseup', function() {
               aiEyes.forEach(eye => {
                   eye.style.height = '8px';
                   eye.style.borderRadius = '50%';
               });
           });
       });
       
       // NEW FEATURES - Search & Filter Functions
       function performSearch() {
        const query = document.getElementById('searchInput').value.trim().toLowerCase();
        if (query.length < 2) return;
        
        // Clear previous results
        const existingResults = document.querySelector('.search-results');
        if (existingResults) {
            existingResults.remove();
        }
        
        // Create results container
        const resultsContainer = document.createElement('div');
        resultsContainer.className = 'search-results active';
        
        // Find matching states
        const matchingStates = findMatchingStates(query);
        
        // Display results
        resultsContainer.innerHTML = `
            <div class="results-header">
                <div class="results-count">${matchingStates.length} results found for "${query}"</div>
                <button class="results-close" onclick="this.parentElement.parentElement.remove()">×</button>
            </div>
            <div class="results-grid">
                ${matchingStates.map(state => `
                    <div class="state-card" onclick="showStateDetails(${JSON.stringify(state).replace(/"/g, '&quot;')})">
                        <button class="favorites-btn ${isFavorite(state.name) ? 'active' : ''}" onclick="toggleFavorite(event, '${state.name}')">
                            <i class="fas fa-heart"></i>
                        </button>
                        ${state.name}
                    </div>
                `).join('')}
            </div>
        `;
        
        // Append results to container
        document.querySelector('.search-container').after(resultsContainer);
        
        // Scroll to results
        resultsContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
       // Find matching states based on query
       // Find matching states based on query
function findMatchingStates(query) {
    // If no states loaded yet, return empty array
    if (!currentStates || currentStates.length === 0) {
        console.log("No states available to search");
        return [];
    }
    
    console.log("Searching for:", query, "in", currentStates.length, "states");
    
    return currentStates.filter(state => {
        // Match state name
        if (state.name && state.name.toLowerCase().includes(query)) {
            console.log("Match found in state name:", state.name);
            return true;
        }
        
        // Match capital
        if (state.capital && state.capital.toLowerCase().includes(query)) {
            console.log("Match found in capital:", state.capital);
            return true;
        }
        
        // Match tourist places
        if (state.touristPlaces && Array.isArray(state.touristPlaces) && 
            state.touristPlaces.some(place => place.toLowerCase().includes(query))) {
            console.log("Match found in tourist places for:", state.name);
            return true;
        }
        
        // Match description
        if (state.description && state.description.toLowerCase().includes(query)) {
            console.log("Match found in description for:", state.name);
            return true;
        }
        
        return false;
    });
}
       
       // Apply filters function
       function applyFilters() {
           // Get selected category filters
           const selectedCategories = Array.from(document.querySelectorAll('input[data-filter="category"]:checked'))
               .map(input => input.value);
           
           // Get selected region filters
           const selectedRegions = Array.from(document.querySelectorAll('input[data-filter="region"]:checked'))
               .map(input => input.value);
           
           // Get sort option
           const sortOption = document.querySelector('input[name="sortBy"]:checked').value;
           
           // Apply filters to current states
           let filteredStates = [...currentStates];
           
           // Filter by category if selected
           if (selectedCategories.length > 0) {
               filteredStates = filteredStates.filter(state => {
                   // Check if state has any matching category
                   // Note: You'll need to add category data to your states or infer from properties
                   let stateCategories = [];
                   
                   // Infer categories from properties
                   if (state.touristPlaces && state.touristPlaces.some(place => 
                       place.toLowerCase().includes('fort') || 
                       place.toLowerCase().includes('palace') || 
                       place.toLowerCase().includes('temple') ||
                       place.toLowerCase().includes('monument'))) {
                       stateCategories.push('historical');
                   }
                   
                   if (state.touristPlaces && state.touristPlaces.some(place => 
                       place.toLowerCase().includes('beach') || 
                       place.toLowerCase().includes('sea') || 
                       place.toLowerCase().includes('island'))) {
                       stateCategories.push('beaches');
                   }
                   
                   if (state.touristPlaces && state.touristPlaces.some(place => 
                       place.toLowerCase().includes('mountain') || 
                       place.toLowerCase().includes('hill') || 
                       place.toLowerCase().includes('peak') ||
                       place.toLowerCase().includes('valley'))) {
                       stateCategories.push('mountains');
                   }
                   
                   if (state.touristPlaces && state.touristPlaces.some(place => 
                       place.toLowerCase().includes('sanctuary') || 
                       place.toLowerCase().includes('national park') || 
                       place.toLowerCase().includes('tiger') ||
                       place.toLowerCase().includes('zoo'))) {
                       stateCategories.push('wildlife');
                   }
                   
                   if (state.touristPlaces && state.touristPlaces.some(place => 
                       place.toLowerCase().includes('temple') || 
                       place.toLowerCase().includes('church') || 
                       place.toLowerCase().includes('mosque') ||
                       place.toLowerCase().includes('gurudwara'))) {
                       stateCategories.push('pilgrimage');
                   }
                   
                   return stateCategories.some(cat => selectedCategories.includes(cat));
               });
           }
           
           // Filter by region if selected
           if (selectedRegions.length > 0) {
               filteredStates = filteredStates.filter(state => {
                   // Define regions
                   const northStates = ['Delhi', 'Punjab', 'Haryana', 'Rajasthan', 'Uttar Pradesh', 'Himachal Pradesh', 'Uttarakhand', 'Jammu and Kashmir', 'Ladakh', 'Chandigarh'];
                   const southStates = ['Karnataka', 'Tamil Nadu', 'Kerala', 'Andhra Pradesh', 'Telangana', 'Puducherry'];
                   const eastStates = ['West Bengal', 'Bihar', 'Jharkhand', 'Odisha'];
                   const westStates = ['Maharashtra', 'Gujarat', 'Goa'];
                   const centralStates = ['Madhya Pradesh', 'Chhattisgarh'];
                   const northeastStates = ['Assam', 'Meghalaya', 'Manipur', 'Mizoram', 'Tripura', 'Nagaland', 'Arunachal Pradesh', 'Sikkim'];
                   
                   const stateRegion = 
                       northStates.includes(state.name) ? 'north' :
                       southStates.includes(state.name) ? 'south' :
                       eastStates.includes(state.name) ? 'east' :
                       westStates.includes(state.name) ? 'west' :
                       centralStates.includes(state.name) ? 'central' :
                       northeastStates.includes(state.name) ? 'northeast' : '';
                   
                   return selectedRegions.includes(stateRegion);
               });
           }
           
           // Sort results
           if (sortOption === 'alphabetical') {
               filteredStates.sort((a, b) => a.name.localeCompare(b.name));
           } else if (sortOption === 'popularity') {
               // Example popularity mapping (you can adjust this based on actual data)
               const popularityMap = {
                   'Rajasthan': 95, 'Kerala': 92, 'Goa': 90, 'Delhi': 88, 'Maharashtra': 85,
                   'Uttar Pradesh': 82, 'Tamil Nadu': 80, 'Karnataka': 78, 'Himachal Pradesh': 76, 
                   'Uttarakhand': 74, 'Gujarat': 72
               };
               
               filteredStates.sort((a, b) => (popularityMap[b.name] || 50) - (popularityMap[a.name] || 50));
           } else if (sortOption === 'rating') {
               // Example rating mapping (you can adjust this based on actual data)
               const ratingMap = {
                   'Kerala': 4.8, 'Rajasthan': 4.7, 'Himachal Pradesh': 4.6, 'Goa': 4.5, 
                   'Uttarakhand': 4.5, 'Karnataka': 4.4, 'Tamil Nadu': 4.3, 'Gujarat': 4.2, 
                   'Maharashtra': 4.1, 'Delhi': 4.0, 'Uttar Pradesh': 3.9
               };
               
               filteredStates.sort((a, b) => (ratingMap[b.name] || 3.5) - (ratingMap[a.name] || 3.5));
           }
           
           // Display filtered results
           displayStates(filteredStates, 'filtered');
           
           // Update active filters display
           updateActiveFilters(selectedCategories, selectedRegions, sortOption);
       }
       
       // Clear filters function
       function clearFilters() {
           // Uncheck all checkboxes
           document.querySelectorAll('input[data-filter]').forEach(input => {
               input.checked = false;
           });
           
           // Reset sort to alphabetical
           document.querySelector('input[value="alphabetical"]').checked = true;
           
           // Clear active filters display
           document.querySelector('.active-filters')?.remove();
           
           // Reset to original states display
           if (document.getElementById('btnNorth').classList.contains('btn-active')) {
               loadStates('north');
           } else if (document.getElementById('btnSouth').classList.contains('btn-active')) {
               loadStates('south');
           } else {
               loadAllStates();
           }
       }
       
       // Update active filters display
       function updateActiveFilters(categories, regions, sortOption) {
           // Remove existing active filters
           document.querySelector('.active-filters')?.remove();
           
           // If no filters selected, return
           if (categories.length === 0 && regions.length === 0) return;
           
           // Create active filters container
           const filtersContainer = document.createElement('div');
           filtersContainer.className = 'active-filters';
           
           // Add category filters
           categories.forEach(category => {
               filtersContainer.innerHTML += `
                   <div class="filter-tag">
                       ${category.charAt(0).toUpperCase() + category.slice(1)}
                       <button onclick="removeFilter('category', '${category}')">×</button>
                   </div>
               `;
           });
           
           // Add region filters
           regions.forEach(region => {
               filtersContainer.innerHTML += `
                   <div class="filter-tag">
                       ${region.charAt(0).toUpperCase() + region.slice(1)} India
                       <button onclick="removeFilter('region', '${region}')">×</button>
                   </div>
               `;
           });
           
           // Add sort option
           filtersContainer.innerHTML += `
               <div class="filter-tag">
                   Sorted by: ${sortOption}
               </div>
           `;
           
           // Append active filters to container
           document.querySelector('.search-container').after(filtersContainer);
       }
       
       // Remove individual filter
       function removeFilter(type, value) {
           // Uncheck the corresponding checkbox
           document.querySelector(`input[data-filter="${type}"][value="${value}"]`).checked = false;
           
           // Apply filters again
           document.getElementById('applyFilters').click();
       }
       
       // NEW FEATURES - Favorites & Recently Viewed Functions
       
       // Check if a state is in favorites
       function isFavorite(stateName) {
           return userFavorites.includes(stateName);
       }
       
       // Toggle favorite state
       // Toggle favorite state
function toggleFavorite(event, stateName) {
    // Prevent clicking on the card
    if (event) {
        event.stopPropagation();
    }
    
    console.log("Toggling favorite for:", stateName);
    console.log("Current favorites:", userFavorites);
    
    const index = userFavorites.indexOf(stateName);
    
    if (index === -1) {
        // Add to favorites
        userFavorites.push(stateName);
        // Show toast notification
        showToast(`${stateName} added to favorites!`);
        console.log("Added to favorites:", stateName);
    } else {
        // Remove from favorites
        userFavorites.splice(index, 1);
        // Show toast notification
        showToast(`${stateName} removed from favorites!`);
        console.log("Removed from favorites:", stateName);
    }
    
    // Update buttons that reference this state
    document.querySelectorAll(`.favorites-btn[onclick*="${stateName}"]`).forEach(btn => {
        if (isFavorite(stateName)) {
            btn.classList.add('active');
        } else {
            btn.classList.remove('active');
        }
    });
    
    // Save favorites
    saveUserData();
    
    // Update favorites display if visible
    if (document.getElementById('favoritesContainer').style.display === 'block') {
        showFavorites();
    }
}
       
       // Add state to recently viewed
       // Add state to recently viewed
function addToRecentlyViewed(state) {
    if (!state || !state.name) {
        console.log("Invalid state object:", state);
        return;
    }
    
    console.log("Adding to recently viewed:", state.name);
    
    // Remove if already in list (to avoid duplicates)
    recentlyViewed = recentlyViewed.filter(item => item.name !== state.name);
    
    // Add to beginning of array
    recentlyViewed.unshift({
        name: state.name,
        capital: state.capital,
        image: state.image
    });
    
    // Limit to 5 items
    if (recentlyViewed.length > 5) {
        recentlyViewed.pop();
    }
    
    // Save to memory
    saveUserData();
    
    // Update display
    updateRecentlyViewedDisplay();
}
       
       // Update recently viewed display
       // Update recently viewed display
function updateRecentlyViewedDisplay() {
    const container = document.getElementById('recentlyViewedContainer');
    const grid = document.getElementById('recentlyViewedGrid');
    
    if (!recentlyViewed || recentlyViewed.length === 0) {
        container.style.display = 'none';
        return;
    }
    
    console.log("Updating recently viewed display with", recentlyViewed.length, "items");
    
    container.style.display = 'block';
    grid.innerHTML = recentlyViewed.map(state => `
        <div class="recently-viewed-item" 
             style="background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.7)), ${state.image ? `url('${state.image}')` : 'var(--gradient-primary)'};
                    background-size: cover; background-position: center;"
             onclick="loadStateByName('${state.name}')">
            ${state.name}
        </div>
    `).join('');
}
       
       // Load state by name (for recently viewed)
       function loadStateByName(stateName) {
           const state = currentStates.find(s => s.name === stateName);
           if (state) {
               showStateDetails(state);
               highlightStateCard(stateName);
           } else {
               // If not found in current states, fetch it
               // For demo, we'll load all states and then filter
               loadAllStates().then(() => {
                   const state = currentStates.find(s => s.name === stateName);
                   if (state) {
                       showStateDetails(state);
                       highlightStateCard(stateName);
                   }
               });
           }
       }
       
       // Show favorites
       function showFavorites() {
           setActiveButton('btnFavorites');
           
           // Hide state lists and details
           document.getElementById('statesList').style.display = 'none';
           document.getElementById('stateDetails').innerHTML = '';
           
           // Show favorites container
           const favoritesContainer = document.getElementById('favoritesContainer');
           favoritesContainer.style.display = 'block';
           
           // Generate favorites grid
           const favoritesGrid = document.getElementById('favoritesGrid');
           
           if (userFavorites.length === 0) {
               favoritesGrid.innerHTML = `
                   <div class="empty-favorites">
                       <i class="fas fa-heart-broken"></i>
                       <h3>No Favorites Yet</h3>
                       <p>Explore states and save them to your favorites!</p>
                   </div>
               `;
               return;
           }
           
           // Find favorite states in current states
           let favoriteStates = [];
           
           userFavorites.forEach(stateName => {
               const state = currentStates.find(s => s.name === stateName);
               if (state) {
                   favoriteStates.push(state);
               } else {
                   // If state not found in current states, add basic info
                   favoriteStates.push({
                       name: stateName,
                       capital: ''
                   });
               }
           });
           
           // Generate grid
           favoritesGrid.innerHTML = favoriteStates.map(state => `
               <div class="favorite-card" onclick="loadStateByName('${state.name}')">
                   <button class="remove-favorite" onclick="toggleFavorite(event, '${state.name}')">
                       <i class="fas fa-times"></i>
                   </button>
                   <h3>${state.name}</h3>
                   <p>${state.capital ? `Capital: ${state.capital}` : ''}</p>
               </div>
           `).join('');
       }
       
       // Hide/show favorites
       function hideShowFavorites(show = true) {
           const favoritesContainer = document.getElementById('favoritesContainer');
           const statesList = document.getElementById('statesList');
           
           if (show) {
               favoritesContainer.style.display = 'block';
               statesList.style.display = 'none';
               setActiveButton('btnFavorites');
           } else {
               favoritesContainer.style.display = 'none';
               statesList.style.display = 'block';
               // Determine which button to activate
               if (document.getElementById('btnNorth').classList.contains('btn-active')) {
                   // North is already active
               } else if (document.getElementById('btnSouth').classList.contains('btn-active')) {
                   // South is already active
               } else {
                   setActiveButton('btnAll');
               }
           }
       }
       
       // Show toast notification
       function showToast(message) {
           // Create toast container if it doesn't exist
           let toastContainer = document.querySelector('.toast-container');
           if (!toastContainer) {
            toastContainer = document.createElement('div');
            toastContainer.className = 'toast-container';
            toastContainer.style.cssText = `
                position: fixed;
                bottom: 20px;
                left: 20px;
                z-index: 9999;
            `;
            document.body.appendChild(toastContainer);
        }
        
        // Create toast
        const toast = document.createElement('div');
        toast.className = 'toast';
        toast.style.cssText = `
            background: var(--gradient-primary);
            color: white;
            padding: 12px 20px;
            border-radius: 10px;
            margin-top: 10px;
            font-size: 14px;
            font-weight: 500;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            gap: 10px;
            animation: slideInLeft 0.3s ease-out forwards;
            max-width: 300px;
        `;
        
        // Add content
        toast.innerHTML = `
            <i class="fas fa-heart"></i>
            ${message}
        `;
        
        // Add to container
        toastContainer.appendChild(toast);
        
        // Remove after 3 seconds
        setTimeout(() => {
            toast.style.animation = 'slideOutLeft 0.3s ease-out forwards';
            setTimeout(() => {
                toastContainer.removeChild(toast);
            }, 300);
        }, 3000);
    }
    
    // Create CSS animations for toast
    const style = document.createElement('style');
    style.textContent = `
        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-100px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @keyframes slideOutLeft {
            from {
                opacity: 1;
                transform: translateX(0);
            }
            to {
                opacity: 0;
                transform: translateX(-100px);
            }
        }
    `;
    document.head.appendChild(style);
</script>
</body>
</html>